{{- if or (eq .env "dev") }}
---
image: {{ .project }}-prisma-{{ .env }}
from: node:20-alpine
git:
- add: /
  to: /workspace/prisma
  stageDependencies:
    setup:
    - "*/**"
    install:
    - "package.json"
    - "package-lock.json"
    - "yarn.lock"
    - ".yarnrc.yml"
    - "playwright.config.ts"
    - "turbo.json"
    - "git-init.sh"
    - "git-setup.sh"
ansible:
  install:
  - name: "Install yarn"
    shell: npx turbo prune --scope=@calcom/prisma --docker
    args:
     chdir: /workspace/prisma
  - name: "Install libs"
    shell: yarn workspace @calcom/prisma install
    args:
     chdir: /workspace/prisma
  - name: "ls calendar"
    shell: ls -al /workspace/prisma
    args:
     chdir: /workspace/prisma
docker:
  CMD: ["/bin/sleep", "infinity"]
  USER: root
  EXPOSE: "80"
  WORKDIR: /workspace/prisma
  ENV:
    LC_ALL: en_US.UTF-8
    TERM: xterm
    COLORTERM: truecolor
{{- end }}
